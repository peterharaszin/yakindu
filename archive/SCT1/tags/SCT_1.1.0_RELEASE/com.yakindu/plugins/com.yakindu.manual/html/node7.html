<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>UML Transformation</TITLE>
<META NAME="description" CONTENT="UML Transformation">
<META NAME="keywords" CONTENT="compendium">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="compendium.css">

<LINK REL="next" HREF="node8.html">
<LINK REL="previous" HREF="node6.html">
<LINK REL="up" HREF="compendium.html">
<LINK REL="next" HREF="node8.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html288"
  HREF="node8.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/opt/local/share/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html284"
  HREF="compendium.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/opt/local/share/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html278"
  HREF="node6.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/opt/local/share/lib/latex2html/icons/prev.png"></A> 
<A NAME="tex2html286"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/opt/local/share/lib/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html289"
  HREF="node8.html">About this document ...</A>
<B> Up:</B> <A NAME="tex2html285"
  HREF="compendium.html">compendium</A>
<B> Previous:</B> <A NAME="tex2html279"
  HREF="node6.html">Java-Code Generator</A>
 &nbsp; <B>  <A NAME="tex2html287"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html290"
  HREF="node7.html#SECTION00710000000000000000">Introduction</A>
<LI><A NAME="tex2html291"
  HREF="node7.html#SECTION00720000000000000000">UML2 model</A>
<LI><A NAME="tex2html292"
  HREF="node7.html#SECTION00730000000000000000">The example project</A>
<LI><A NAME="tex2html293"
  HREF="node7.html#SECTION00740000000000000000">How does it work</A>
<UL>
<LI><A NAME="tex2html294"
  HREF="node7.html#SECTION00741000000000000000">Name mapping</A>
<LI><A NAME="tex2html295"
  HREF="node7.html#SECTION00742000000000000000">New elements</A>
<LI><A NAME="tex2html296"
  HREF="node7.html#SECTION00743000000000000000">Limitations</A>
<LI><A NAME="tex2html297"
  HREF="node7.html#SECTION00744000000000000000">Transformation Cartridge</A>
</UL>
<BR>
<LI><A NAME="tex2html298"
  HREF="node7.html#SECTION00750000000000000000">Extending an UML2 state machine</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00700000000000000000"></A>
<A NAME="sec:UMLTransformation"></A>
<BR>
UML Transformation
</H1>

<H1><A NAME="SECTION00710000000000000000">
Introduction</A>
</H1>
In our previous examples we created a YAKINDU state chart with the YAKINDU
Statechart Editor. However, it is also possible to import an existing UML2
state machine or create one with your favourite UML2 tool (You may also use
the UML2 Editor which ships with the eclipse modelling distribution). The tool
of your choice must support "EMF UML2". In our examples we are going to use
the UML2-Toools available in Galileo.

<P>
If you want to use an UML2 modelling tool instead of the YAKINDU Statechart
Editor or you have an existing UML2 state machine, you need to consider that
the YAKINDU state charts are somehow different from the UML2 state machines.
To fill this gap you have to extend your UML2 state machine (In future
releases another approach may also be available).

<P>

<H1><A NAME="SECTION00720000000000000000">
UML2 model</A>
</H1>
As for the code genenerators, an example project for transformation of UML2
state machines to YAKINDU state charts is also available. You can open the
examples (see Figure <A HREF="#fig:uml2tools">6.1</A>) and compare them with the generated
YAKINDU state charts. 
<DIV ALIGN="CENTER"><A NAME="fig:uml2tools"></A><A NAME="1407"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.1:</STRONG>
UML2 state machine in eclipse</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img65.png"
 ALT="\includegraphics[width=1\textwidth]{Pictures/uml2tools}"></TD></TR>
</TABLE>
</DIV>

<P>
Some information, which cannot be modelled in UML2 are generated
automatically, or as mentioned before, can be specified somehow else. For
example: Every Transition and every Region in a YAKINDU state chart needs a
priority. On how to set a priority will be discussed later. Lets have a look
at an example project first.

<P>

<H1><A NAME="SECTION00730000000000000000">
The example project</A>
</H1>
The example is available within eclipse under <SPAN  CLASS="textbf">File</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>

<SPAN  CLASS="textbf">New</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>
 <SPAN  CLASS="textbf">Example...</SPAN> within the category
<SPAN  CLASS="textbf">YAKINDU Examples</SPAN>. Select ''UML -&gt; YAKINDU Transformation'' and Finish the
dialog. A new project ''UML_TransformationExample'' containing one UML
diagrams inclusive ''.umlstm'' diagram file for UML tools will be created.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:runTransformationUMLAs"></A><A NAME="1408"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.2:</STRONG>
Run UML transformation workflow</CAPTION>
<TR><TD>0.3
  <DIV ALIGN="CENTER">

</DIV><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img66.png"
 ALT="\includegraphics[width=0.3\textwidth]{Pictures/runTransformationUMLAs}"></TD></TR>
</TABLE>
</DIV>
To generate the YAKINDU state chart, right-click on
<SPAN  CLASS="textbf">generate_demo.oaw</SPAN> and select <SPAN  CLASS="textbf">Run As</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>

<SPAN  CLASS="textbf">MWE Workflow</SPAN> (Compare Figure <A HREF="#fig:runTransformationUMLAs">6.2</A>). The
output of the transformation is saved in the new folder src-gen and the status
of the run is available in the Console view of eclipse, which will be
automatically opened in the right corner at the bottom of the window.

<P>
The result is a *.statemachine file which can be found in the src-gen folder
within your project. The output folder, where your statemachines will be generated
and the UML2 model can be defined in the generatordemo.oaw. The next step,
which should follow, is to generate a diagram for your model. This is not
automatically done, but with a right-click on the statemachine file you can
initialize a diagram (see figure <A HREF="#fig:initializeDiagram">6.3</A>). Because the
layout information are not stored inside UML2 you have to draft your diagram
by hand. 
<DIV ALIGN="CENTER"><A NAME="fig:initializeDiagram"></A><A NAME="1409"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.3:</STRONG>
Initialize Diagram</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img67.png"
 ALT="\includegraphics[width=0.6\textwidth]{Pictures/initializeDiagram}"></TD></TR>
</TABLE>
</DIV>

<P>
The generated state chart can be edited, simulated and code can be generated
from it. These steps were described in previous chapters. If you want to
generate code from the state chart see Chapter <A HREF="node5.html#sec:CCodeGenerator">4</A> for C
and Chapter <A HREF="node6.html#sec:JavaCodeGenerator">5</A> for Java. If the model is a valid
YAKINDU state chart a simulation is also possible (see Chapter
<A HREF="node4.html#sec:simulatingStateMachine">3.2.8</A>).

<P>

<H1><A NAME="SECTION00740000000000000000">
How does it work</A>
</H1>
The UML2 state machine and the YAKINDU state chart are quite similar.
Nevertheless, there are a few differences that need to be cared of.

<P>

<H2><A NAME="SECTION00741000000000000000">
Name mapping</A>
</H2>
The naming is the smallest gap. The following table shows the name mapping
between the UML2 state machine and the YAKINDU state chart.

<P>
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="1346"></A>
<TABLE>
<CAPTION><STRONG>Table 6.1:</STRONG>
UML2 - YAKINDU Mapping</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1" ALIGN="CENTER">
<TR><TD ALIGN="CENTER">UML2</TD>
<TD ALIGN="CENTER">YAKINDU</TD>
</TR>
<TR><TD ALIGN="CENTER">StateMachine</TD>
<TD ALIGN="CENTER">Statechart</TD>
</TR>
<TR><TD ALIGN="CENTER">Region</TD>
<TD ALIGN="CENTER">Region</TD>
</TR>
<TR><TD ALIGN="CENTER">Transition</TD>
<TD ALIGN="CENTER">Transition</TD>
</TR>
<TR><TD ALIGN="CENTER">Vertex</TD>
<TD ALIGN="CENTER">Node</TD>
</TR>
<TR><TD ALIGN="CENTER">State</TD>
<TD ALIGN="CENTER">State</TD>
</TR>
<TR><TD ALIGN="CENTER">FinalState</TD>
<TD ALIGN="CENTER">FinalState</TD>
</TR>
<TR><TD ALIGN="CENTER">Pseudostate</TD>
<TD ALIGN="CENTER">Pseudostate</TD>
</TR>
</TABLE>
</DIV>

<A NAME="UML2_-_YAKINDU_Mapping"></A></TD></TR>
</TABLE>
</DIV><P></P>
<BR>

<P>
As you can see, there are only marginal differences. Besides that, YAKINDU state
chart also defines new elements which are not present in the UML2.

<P>

<H2><A NAME="SECTION00742000000000000000">
New elements</A>
</H2>
The new elements are Variable and Event. As those can't be mapped 1:1, some
conventions are needed. The default behavior of the transformation is to ignore
those elements. This will result in an incomplete YAKINDU state chart (therefore
no simulation is possible). To prevent this, you have to extend your UML2 state machine.

<P>

<H2><A NAME="SECTION00743000000000000000">
Limitations</A>
</H2>
There are a few UML Elements that are currently not supported by the transformation. That includes the
PseudoStates

<UL>
<LI>join
</LI>
<LI>fork
</LI>
<LI>entryPoint
</LI>
<LI>exitPoint
</LI>
<LI>and terminate.
</LI>
</UL>
A transformation that encounters such
an element will fail.

<P>

<H2><A NAME="SECTION00744000000000000000">
Transformation Cartridge</A>
</H2>
The Transformation Cartridge allows you to integrate the YAKINDU Transformation into
your oAW Workflow. The cartridge expects the following parameters.

<P>
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="1360"></A>
<TABLE>
<CAPTION><STRONG>Table 6.2:</STRONG>
YAKINDU Transformation Cartridge Parameters</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1" ALIGN="CENTER">
<TR><TD ALIGN="LEFT">Parameter</TD>
<TD ALIGN="LEFT">Description</TD>
</TR>
<TR><TD ALIGN="LEFT">umlModel</TD>
<TD ALIGN="LEFT">A path to your UML2 Model file.</TD>
</TR>
<TR><TD ALIGN="LEFT">srcgen</TD>
<TD ALIGN="LEFT">The output folder where the generated *.statemachine files should be created.</TD>
</TR>
<TR><TD ALIGN="LEFT">package</TD>
<TD ALIGN="LEFT">The root directory for the transformation.</TD>
</TR>
</TABLE>
</DIV>

<A NAME="YAKINDU_Transformation_Cartridge_Parameters"></A></TD></TR>
</TABLE>
</DIV><P></P>
<BR>

<P>
In your oAW Workflow it may look like this:<PRE>
...
&lt;property name="umlModel" value="model/Simple.uml"/&gt;
&lt;property name="src-gen" value="src-gen"/&gt;
&lt;property name="config" value="src/" /&gt;

&lt;!-- Generator call with model-file and output-folder --&gt;
&lt;cartridge file='com/yakindu/statechart/transformation/uml2/transform.oaw' 
	project="com.yakindu.statechart.transformation.examples.uml2"
 	umlModel="${umlModel}" 
 	src-gen="${src-gen}" 
 	config="${config}" /&gt;
...
</PRE> 

<P>

<H1><A NAME="SECTION00750000000000000000">
Extending an UML2 state machine</A>
</H1>
Since there aren't UML2 Elements called Variable or Event, those have to be
created with the existing UML2 elements and the YAKINDU UML2 profile. The profile
allows you to give Transitions and Regions a priority and to describe Events as
Signals and Variables as Classes.

<P>
First you need to apply the YAKINDU UML2 profile.  Open your *.uml file and select the model.
Click on <SPAN  CLASS="textbf">UML Editor</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>
 <SPAN  CLASS="textbf">Package</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>

<SPAN  CLASS="textbf">Apply Profile</SPAN>. A new window pops up where you add the YAKINDU UML2
profile to your model. Press <SPAN  CLASS="textbf">Ok</SPAN> and save the *.uml file. Now that the
profile has been loaded you need to apply the stereotypes to various elements.
You can do this with the UML Editor which has been used until now.

<DIV ALIGN="CENTER"><A NAME="fig:priorityVisualisation"></A><A NAME="1410"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.4:</STRONG>
UML2 state machine example</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img68.png"
 ALT="\includegraphics[width=0.5\textwidth]{Pictures/priorityVisualisation}"></TD></TR>
</TABLE>
</DIV>

<P>
Open the related *.umlstm file. It should look somehow like Figure
<A HREF="#fig:priorityVisualisation">6.4</A>. The YAKINDU UML2 profile allows us to apply the
stereotypes Priority, Variable and Event. Priority can be applied to Transitions
and Regions, Variable to Classes and Event to Signals. First, we want to give
every Transition and every Region a Priority. To do so, select a
Transition/Region in the UML Editor. Select <SPAN  CLASS="textbf">UML Editor</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>
 <SPAN  CLASS="textbf">Element</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>

<SPAN  CLASS="textbf">Apply Stereotype...</SPAN>. Afterwards you can edit the priority in the properties tab, if element is selected.

<DIV ALIGN="CENTER"><A NAME="fig:changePriority"></A><A NAME="1411"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.5:</STRONG>
Change the Priority</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img69.png"
 ALT="\includegraphics[width=0.9\textwidth]{Pictures/changePriority}"></TD></TR>
</TABLE>
</DIV>
The default value for Priority is 0 (see figure
<A HREF="#fig:changePriority">6.5</A>). That's it! Repeat this for every Transition/Region in
your State machine.

<P>
Now we are going to add the Stereotypes Event to our Signals. Most work will be done in the tree UML Editor. 

<DIV ALIGN="CENTER"><A NAME="fig:editorApplyStereotype"></A><A NAME="1412"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.6:</STRONG>
Apply Stereotype</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img70.png"
 ALT="\includegraphics[width=0.9\textwidth]{Pictures/editorApplyStereotype}"></TD></TR>
</TABLE>
</DIV>

<P>
Select a Signal and click on <SPAN  CLASS="textbf">UML Editor</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>
 <SPAN  CLASS="textbf">Element</SPAN>
<!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>
<SPAN  CLASS="textbf">Apply Stereotype</SPAN> (see figure
<A HREF="#fig:editorApplyStereotype">6.6</A>). Add YAKINDU::Event and press <SPAN  CLASS="textbf">OK</SPAN>. In
the Properties View you can see now a Property Event with some Attributes.

<DIV ALIGN="CENTER"><A NAME="fig:editorProperty"></A><A NAME="1413"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.7:</STRONG>
Change Attributes</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img71.png"
 ALT="\includegraphics[width=0.9\textwidth]{Pictures/editorProperty}"></TD></TR>
</TABLE>
</DIV>
Change those Attributes to your needs (see figure <A HREF="#fig:editorProperty">6.7</A>).
Repeat this for every Signal in your state machine.

<P>
To add Variables to your UML2 state machine you have to create properties for your variable first. 

<DIV ALIGN="CENTER"><A NAME="fig:variableExpression"></A><A NAME="1414"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 6.8:</STRONG>
Property named after a Variable</CAPTION>
<TR><TD><IMG
 ALIGN="BOTTOM" BORDER="0" SRC="img72.png"
 ALT="\includegraphics[width=0.7\textwidth]{Pictures/variableExpression}"></TD></TR>
</TABLE>
</DIV>

<P>
Those have to be named after the Variables in the Expressions of your Transitions
(see figure <A HREF="#fig:variableExpression">6.8</A>). If you created a Property, select it and click
on <SPAN  CLASS="textbf">UML Editor</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>
 <SPAN  CLASS="textbf">Element</SPAN> <!-- MATH
 $\rightarrow$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img3.png"
 ALT="$ \rightarrow$"></SPAN>

<SPAN  CLASS="textbf">Apply Stereotype</SPAN>. Add YAKINDU::Variable and press <SPAN  CLASS="textbf">OK</SPAN>. In the
Properties View you can change now the Attributes of Variable to your needs.
Repeat this for every Variable in you Expressions.

<P>
It is important to know that Signals and Properties that should be recognized as Events
and Variables must be created under the state machine in the UML2 model. This is
necessary due to the fact that any number of state machines can be in a UML2 model.

<P>
If you followed all the described steps you are now able to generate a valid
YAKINDU state chart.

<P>


<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html288"
  HREF="node8.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/opt/local/share/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html284"
  HREF="compendium.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/opt/local/share/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html278"
  HREF="node6.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/opt/local/share/lib/latex2html/icons/prev.png"></A> 
<A NAME="tex2html286"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="file:/opt/local/share/lib/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html289"
  HREF="node8.html">About this document ...</A>
<B> Up:</B> <A NAME="tex2html285"
  HREF="compendium.html">compendium</A>
<B> Previous:</B> <A NAME="tex2html279"
  HREF="node6.html">Java-Code Generator</A>
 &nbsp; <B>  <A NAME="tex2html287"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Axel Terfloth_
2010-05-29
</ADDRESS>
</BODY>
</HTML>
